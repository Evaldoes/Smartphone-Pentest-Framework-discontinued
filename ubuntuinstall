#!/bin/sh
#
# This is an attempt to make an installer for Smartphone Pentest Framework
# This is ugly as shit but it works.. could be done in perl a lot better, 
# will convert it one day. maybe. =)
# -loon aug 2012
#######################################################################


## Install needed packages
apt-get install openjdk-7-jdk
apt-get install php5
wget http://dl.google.com/android/android-sdk_r21-linux.tgz;
tar -xvzf android-sdk_r21-linux.tgz;
export PATH=${PATH}:${PWD}/android-sdk-linux/tools:${PWD}/android-sdk-linux/platform-tools
apt-get install ant
android update sdk --no-ui --filter platform-tool
android update sdk --no-ui --filter android-4 -a
android update sdk --no-ui --filter addon-google_apis-google-4 -a
android update sdk --no-ui --filter android-14
android update sdk --no-ui --filter addon-google_apis-google-14
apt-get install mysql-server
apt-get install apache2
sed -i "s/post_max_size .*/post_max_size=100M/" /etc/php5/apache2/php.ini
sed -i "s/upload_max_filesize .*/upload_max_filesize =100M/" /etc/php5/apache2/php.ini
service apache2 start
apt-get install python-mysqldb
echo -e "$(tput setaf 1)Creating first time 'framework' database (empty)\n"; echo "$(tput sgr0)"

service mysql start; 
mysqladmin -u root create framework -ptoor;

echo -e "$(tput setaf 1)\n\nInstall of Smartphone Pentest Framework is complete!\n"; echo "$(tput sgr0)"
echo -e "$(tput setaf 1)You need to edit your config file to your liking in the following location:${PWD}/frameworkconsole/config\n"; echo "$(tput sgr0)"

echo -e "$(tput setaf 1)Once config is setup you can run ./framework.py in the frameworkconsole directory,\n"
echo -e "$(tput setaf 1)This concludes the install.. enjoy!"; echo "$(tput sgr0)"


